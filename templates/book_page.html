{% extends "base.html" %}

{% block book_page %}

<!--Book title section (book's cover image, title, author and description)-->
<section>
  <div class="container">
    <div class="row">
      <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3" >
          <!--Book cover image-->
          <image class="result_img" src="{{ book.get('image')}}" alt="Book cover image">
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
          <!--Book title -->
          <h1> {{ book.get("title")}}</h1>

          {#If the book author is provided show the author's name#}
          {%if book.get("author") != ""%}
          <!--Book author-->
          <strong> By: {{ book.get("author")}}<br> </strong>
          {%endif%}
          <!--Book description-->
          <p>
            {{ book.get("description")}}
          </p>
      </div>
    </div>
  </div>
</section>

<!--Collapsible Bootstrap panel, contains book details-->
<section>
<div class="container">
  <div class="panel-group">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
          <a data-toggle="collapse" href="#details">Book details</a>
        </h3>
      </div>
      <div id="details" class="panel-collapse collapse">
        <div class="panel-body">
          {%if book.get("lang") != ""%}
          <span class="details">
            <strong>language:</strong> {{book.lang}}
          </span>
          {%endif%}

          {%if book.get("format") != ""%}
          <span class="details">
            <strong> Format:</strong> {{book.format}}
          </span>
          {%endif%}

          {%if book.get("genre") != ""%}
          <span class="details">
            <strong> Genre:</strong> {{book.genre}}
          </span>
          {%endif%}

          {%if book.get("isbn13") != ""%}
          <span class="details">
            <strong> ISBN13:</strong> {{book.isbn13}}
          </span>
          {%endif%}

          {%if book.get("isbn10") != ""%}
          <strong> ISBN10:</strong> {{book.isbn10}}
          {%endif%}
        </div>
      </div>
    </div>
  </div>
</div>
</section>


<!--Rate, review and recommend section-->
<aside>
  <div class="iFrameWrap">

  <!--rating chart iFrame-->
  <div class="iFrame">
    <iframe name="ratingChart" id="ratingIframe" scrolling="no" frameborder="no"
      src="/ratingChart:bookID:{{book._id}}"></iframe>
  </div>

  <!--recomend iFrame-->
  <div class="iFrame">
    <iframe name="recomend" frameborder="no" scrolling="no" src="/recommend:bookID:{{book._id}}"></iframe>
  </div>

  <!--rate & review iFrame-->
  <div class="iFrame">
    <iframe frameborder="no" src="/rate:bookID:{{book._id}}"></iframe>
  </div>
  </div>
</aside>


<!--Review section-->
<section>
<div class="container">
<h3>Reviews:</h3>
<hr>

{% for eachReview in reviews %}
{%if eachReview.review != "" %}
<div class="review_wrap">
  <div>reviewed by <strong>{{eachReview.user}}</strong></div>
  <div>
    {%for x in range(1,6)%}
    {%if x == eachReview.rating or x < eachReview.rating%}
    <svg style="width: 2em; height: 2em">
      <use xlink:href="#blue" class="is-selected"></use>
    </svg>
    {%else%}
    <svg style="width: 2em; height: 2em">
      <use xlink:href="#grey" class="is-selected"></use>
    </svg>
    {%endif%}
    {%endfor%}
  </div>
  <div>
    <strong>{{eachReview.title}}</strong>
  </div>
  <div>
    {{eachReview.review}}
  </div>
</div>
{%endif%}
{% endfor %}
</div>
</section>



<!--SVG shape - Zell Lew from https://codepen.io/zellwk/pen/YwjZQv-->
<svg>
  <symbol id="blue" viewBox="0 0 98 92">
    <title>star</title>
    <path
      d='M49 73.5L22.55 87.406l5.05-29.453-21.398-20.86 29.573-4.296L49 6l13.225 26.797 29.573 4.297-21.4 20.86 5.052 29.452z'
      fill="#307bbb" />
</svg>
<svg>
  <symbol id="grey" viewBox="0 0 98 92">
    <title>star</title>
    <path
      d='M49 73.5L22.55 87.406l5.05-29.453-21.398-20.86 29.573-4.296L49 6l13.225 26.797 29.573 4.297-21.4 20.86 5.052 29.452z'
      fill="grey" />
</svg>

{%endblock%}