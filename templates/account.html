{% extends "base.html" %}


{%block user_account%}

 <div class="container container-margin">
<!--Tabs functioality modified code from https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_tabs_open-->
      <div class="tab">
          <button class="tablinks" onclick="openTab(event, 'books')" id="defaultOpen">My books</button>
          <button class="tablinks" onclick="openTab(event, 'reviews')">My reviews</button>
      </div>
        
      <div id="books" class="tabcontent">
          <table class="account-table">
            <tr>
              <th>
                  Book title
              </th>
              <th colspan="2" class="center">
                 Action
              </th>
            </tr>
            {%for eachBook in books%}
            <tr>
             <td>
                {{ eachBook.title}}
             </td>
             <td class="text-right"> 
              
                  <!--form, if submitted, deletes the book titled - "{{eachBook.title}}"-->
                <form action="{{ url_for('account') }}" method="POST" id="delete_book_form">
                  <input type="hidden" name="book_id" value="{{eachBook._id}}">
                  <input type="hidden" name="id" value="delete_book">
                  <button class="delete-btn"><i class="far fa-trash-alt"></i> Delete</button>
                </form>
             </td>
             <td>
          
              
                <!-- a button, if clicked brings the pop-up that allows to edit the information of the book titled - "{{eachBook.title}}" -->
                <button class="edit-btn" type="button" data-toggle="modal" data-target="#{{eachBook._id}}"><i
                    class="far fa-edit"></i>Edit</button>
           
              </td>
            </tr>
            <!--Bootstrap modal. Contains an iFrame with the book editing form-->
            <div class="modal fade" id="{{eachBook._id}}" role="dialog">
              <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <div class="contactFormHeader">
                      <h4>Edit "{{eachBook.title}}"</h4>
                    </div>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                    <iframe id="editFrame" name="edit" frameborder="no" src="/edit_book{{eachBook._id}}"></iframe>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn-close btn btn-default btn-sm" data-dismiss="modal">
                      Close
                    </button>
                  </div>
                </div>

              </div>
            </div>
            {%endfor%}
          </table>
      </div>
        
      <div id="reviews" class="tabcontent">
            <table class="account-table">
                <tr>
                  <th>
                      Review title
                  </th>
                  <th colspan="2" class="center">
                      Action
                  </th>
                </tr>
               {%for eachReview in reviews%}
           
                <tr>
                  <td>
                   {{ eachReview.title}}
                  </td>

                  <td class="text-right">
                    <!--form, if submitted, deletes the review titled - "{{eachReview.title}}"-->
                    <form action="{{ url_for('account') }}" method="POST" id="delete_review_form">
                      <input type="hidden" name="review_id" value="{{eachReview._id}}">
                      <input type="hidden" name="id" value="delete_review">
                      <button class="delete-btn"><i class="far fa-trash-alt"></i> Delete</button>
                    </form>
                  </td>
                  <td>
                   <!-- a button, if clicked brings the pop-up that allows to edit the review titled - "{{eachReview.title}}" -->
                    <button class="edit-btn" type="button" data-toggle="modal" data-target="#{{eachReview._id}}"><i
                    class="far fa-edit"></i>Edit</button>
                  </td>
            
               </tr>
                 <!--Bootstrap modal. Contains an iFrame with the review editing form-->
                 <div class="modal fade" id="{{eachReview._id}}" role="dialog">
              <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                  <div class="modal-header">
                    <div class="contactFormHeader">

                      <h4>Edit review"</h4>
                    </div>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>

                  <div class="modal-body">
                  
                    <iframe class="editFrame" name="edit" frameborder="no" src="/edit_review{{eachReview._id}}"></iframe>




                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn-close btn btn-default btn-sm" data-dismiss="modal">
                      Close
                    </button>
             
                    
                  </div>
                </div>

              </div>
                 </div>
            {%endfor%}
            </table>
      </div>
  </div>
  <script>


/*
  function validate() {
    var title = document.getElementById('title').value;

    var description = document.getElementById('description').value;
    var genre = document.getElementById('add_genre').value;
    if (title == "") {
      document.getElementById("titleError").innerHTML = "Please fill in this field";
    }
    else {
      document.getElementById("titleError").innerHTML = ""
    }
    if (description == "") {
      document.getElementById("descriptionError").innerHTML = "Please fill in this field";
    }
    else {
      document.getElementById("descriptionError").innerHTML = ""
    }
    if (genre == "Choose genre") {
      document.getElementById("genreError").innerHTML = "Please choose genre";
    }
    else {
      document.getElementById("genreError").innerHTML = ""
    }
    if (title != "" && description != "" && genre != "Choose genre") { document.getElementById("add_book_form").submit(); }
  }
/*******************************************************************/
  
</script>



{%endblock%}